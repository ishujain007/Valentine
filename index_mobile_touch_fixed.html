<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sanchi, will you be my Valentine? üíò</title>
  <meta name="description" content="A funny valentine website for Sanchi from Ishaan." />
  <style>
    :root{
      --bg1:#fff1f6;
      --bg2:#ffe4ee;
      --card:#ffffffcc;
      --text:#24121b;
      --muted:#6b3b4f;
      --yes:#ff3b7a;
      --yes2:#ff5f93;
      --no:#2b2b2b;
      --shadow: 0 20px 60px rgba(30, 10, 20, .18);
      --radius: 28px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      min-height: 100svh;
      font-family: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text);
      background:
        radial-gradient(1200px 800px at 20% 10%, var(--bg2), transparent 60%),
        radial-gradient(1100px 700px at 80% 20%, #ffe8c8, transparent 55%),
        radial-gradient(900px 700px at 60% 90%, #e7f4ff, transparent 55%),
        linear-gradient(180deg, var(--bg1), #ffffff);
      overflow-x:hidden;
      overflow-y:auto;
      -webkit-overflow-scrolling: touch;
    }

    .wrap{min-height:100svh;display:grid;place-items:center;padding:24px;padding-left:calc(24px + env(safe-area-inset-left));padding-right:calc(24px + env(safe-area-inset-right));padding-top:calc(24px + env(safe-area-inset-top));padding-bottom:calc(24px + env(safe-area-inset-bottom));}
    .card{
      width:min(900px,100%);
      background:var(--card);
      border:1px solid rgba(255,255,255,.5);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
      border-radius: var(--radius);
      padding: 30px 22px;
      position:relative;
      overflow-x:hidden;
      overflow-y:auto;
      -webkit-overflow-scrolling: touch;
    }
    .sparkles{
      position:absolute; inset:-2px; pointer-events:none;
      background:
        radial-gradient(circle at 10% 20%, rgba(255,59,122,.25), transparent 30%),
        radial-gradient(circle at 80% 15%, rgba(255,180,0,.22), transparent 28%),
        radial-gradient(circle at 70% 85%, rgba(0,160,255,.18), transparent 32%),
        radial-gradient(circle at 20% 85%, rgba(255,120,170,.20), transparent 34%);
      filter:saturate(1.1);
    }

    header{
      display:flex; gap:18px; align-items:center; justify-content:center;
      flex-wrap:wrap; text-align:center; position:relative; z-index:1;
    }
    .badge{
      display:inline-flex; align-items:center; gap:10px;
      padding:10px 14px; border-radius:999px;
      background: rgba(255,255,255,.7);
      border:1px solid rgba(255,255,255,.9);
      color:var(--muted); font-weight:700;
      box-shadow: 0 8px 18px rgba(0,0,0,.05);
    }
    h1{
      font-size: clamp(34px, 4.4vw, 56px);
      line-height:1.02; margin: 10px 0 6px; letter-spacing:-.02em;
    }
    p{
      margin:0;
      color:var(--muted);
      font-size: clamp(16px, 2.1vw, 18px);
      line-height:1.5;
      max-width: 56ch;
    }

    .scene{margin-top: 22px; display:grid; gap: 16px; place-items:center; position:relative; z-index:1;}

    .big-heart{
      width: 140px; height: 140px; position:relative;
      filter: drop-shadow(0 18px 18px rgba(255,59,122,.18));
      animation: floaty 3.2s ease-in-out infinite;
    }
    @keyframes floaty{0%,100%{transform: translateY(2px)}50%{transform: translateY(-10px)}}
    .big-heart:before, .big-heart:after{
      content:""; position:absolute;
      width: 90px; height: 120px;
      background: linear-gradient(180deg, var(--yes2), var(--yes));
      border-radius: 90px 90px 16px 16px;
      top: 10px; left: 30px;
      transform: rotate(-45deg); transform-origin: 0 100%;
    }
    .big-heart:after{left: 20px; transform: rotate(45deg); transform-origin: 100% 100%;}

    .buttons{
      display:flex; gap:14px; flex-wrap:wrap;
      justify-content:center; align-items:center;
      margin-top: 8px; min-height: 78px; width:100%;
      position:relative;
    }
    button{
      border:0; cursor:pointer; font-weight:900;
      touch-action: manipulation;
      letter-spacing:.01em; border-radius: 999px;
      padding: 14px 18px; font-size: 18px;
      transition: transform .12s ease, filter .12s ease, box-shadow .12s ease;
      user-select:none; -webkit-tap-highlight-color: transparent;
    }
    button:active{transform: translateY(1px) scale(.99)}
    button:focus-visible{outline: 4px solid rgba(255,59,122,.25); outline-offset: 3px}

    .yes{
      background: linear-gradient(180deg, var(--yes2), var(--yes));
      color:white;
      box-shadow: 0 16px 30px rgba(255,59,122,.25);
      min-width: 220px;
    }
    .yes:hover{filter: brightness(1.03)}
    .no{
      background: rgba(0,0,0,.08);
      color: var(--no);
      box-shadow: 0 12px 22px rgba(0,0,0,.08);
      min-width: 170px;
      position:relative;
    }

    .note{margin-top: 2px; font-size: 13px; color: rgba(107,59,79,.92); text-align:center;}
    .footer{margin-top: 12px; text-align:center; color: rgba(107,59,79,.75); font-size: 13px;}

    .mini{
      display:flex; flex-wrap:wrap; justify-content:center; gap:10px;
      color: rgba(107,59,79,.85); font-size: 13px;
      margin-top: 2px;
    }
    .pill{
      padding:8px 12px; border-radius:999px;
      background: rgba(255,255,255,.7);
      border:1px solid rgba(255,255,255,.9);
    }

    .overlay{
      position:fixed; inset:0; display:none; place-items:center;
      background: rgba(255,255,255,.55); backdrop-filter: blur(10px);
      z-index: 10;
    }
    .overlay.show{display:grid}
    .modal{
      width:min(680px, calc(100% - 40px));
      background:white; border-radius: 28px;
      padding: 26px 22px; box-shadow: var(--shadow);
      text-align:center; position:relative; overflow:hidden;
    }
    .modal h2{margin: 4px 0 8px; font-size: clamp(28px, 4vw, 44px); letter-spacing:-.02em;}
    .modal p{margin:0 auto 12px;}
    .small{font-size: 13px; color: rgba(107,59,79,.75); line-height:1.5;}
    .close{margin-top: 10px; background: rgba(0,0,0,.08); padding: 12px 16px; font-weight:900;}

    canvas#fx{position:fixed; inset:0; pointer-events:none; z-index: 9;}

    @media (prefers-reduced-motion: reduce){
      *{animation-duration:0.001ms !important; animation-iteration-count:1 !important; transition-duration:0.001ms !important; scroll-behavior:auto !important;}
      canvas#fx{display:none}
    }

    @media (max-width: 420px){
      .card{padding:22px 16px}
      h1{font-size: clamp(28px, 8vw, 40px)}
      .big-heart{width:110px;height:110px}
      .yes,.no{min-width:100%}
      .buttons{min-height:160px}
      .badge{font-size:12px}
      .pill{padding:7px 10px}
    }
  </style>
</head>
<body>
  <canvas id="fx"></canvas>

  <div class="wrap">
    <div class="card">
      <div class="sparkles"></div>

      <header>
        <div class="badge">üì® from Ishaan ‚Ä¢ to Sanchi ‚Ä¢ legally binding vibes</div>
        <div style="width:100%"></div>
        <h1>Sanchi‚Ä¶ will you be my Valentine? üíò</h1>
        <p id="subtitle">
          This is a simple yes/no question, but I‚Äôve engineered the UI to‚Ä¶ encourage success.
        </p>
      </header>

      <div class="scene">
        <div class="big-heart" aria-hidden="true"></div>

        <div class="mini" aria-hidden="true">
          <span class="pill">‚úÖ includes snacks</span>
          <span class="pill">‚úÖ includes vibes</span>
          <span class="pill">‚úÖ includes Ishaan (non-refundable)</span>
        </div>

        <div class="buttons" id="btnArea">
          <button class="yes" id="yesBtn">Yes, obviously üòåüíû</button>
          <button class="no" id="noBtn">No (risky) üôÉ</button>
        </div>

        <div class="note" id="note">Go on. Press ‚ÄúNo‚Äù. Let‚Äôs see what happens.</div>
        <div class="footer">Powered by romance, comedy, and a tiny bit of menace</div>
      </div>
    </div>
  </div>

  <div class="overlay" id="overlay" role="dialog" aria-modal="true" aria-labelledby="yayTitle">
    <div class="modal">
      <div style="font-size:46px">üéâü•πüíû‚ú®</div>
      <h2 id="yayTitle">SANCHI SAID YES!!!</h2>
      <p>Congratulations. You have unlocked <b>Valentine Mode</b>.</p>
      <p class="small">
        Terms &amp; Conditions:<br/>
        1) You get snacks.<br/>
        2) I get to be excited about this for an unreasonable amount of time.<br/>
        3) You are now required to accept at least one (1) cheesy compliment.<br/>
        4) ‚ÄúNo‚Äù is no longer available as a feature.
      </p>
      <button class="close" id="closeBtn">Close (but not my feelings)</button>
    </div>
  </div>

  <script>
    const yesBtn = document.getElementById('yesBtn');
    const noBtn = document.getElementById('noBtn');
    const btnArea = document.getElementById('btnArea');
    const overlay = document.getElementById('overlay');
    const closeBtn = document.getElementById('closeBtn');
    const subtitle = document.getElementById('subtitle');
    const note = document.getElementById('note');

    let noEscapes = 0;

    function randomPositionWithin(areaEl, btnEl){
      const area = areaEl.getBoundingClientRect();
      const btn = btnEl.getBoundingClientRect();
      const pad = 10;

      const maxX = Math.max(pad, area.width - btn.width - pad);
      const maxY = Math.max(pad, area.height - btn.height - pad);

      const x = pad + Math.random() * maxX;
      const y = pad + Math.random() * maxY;

      btnEl.style.position = 'absolute';
      btnEl.style.left = x + 'px';
      btnEl.style.top = y + 'px';
    }

    const roastLines = [
      "Nope üòå",
      "Sanchi‚Ä¶ be serious üòÇ",
      "That‚Äôs a wild choice for someone with taste",
      "Okay but like‚Ä¶ why are you like this ü•≤",
      "Ishaan has consulted the council. Council says: try again.",
      "This app has detected: incorrect input ‚ùå",
      "The No button is now in witness protection",
      "At this point you‚Äôre just flirting with the UI",
      "Ok I‚Äôm gonna start crying (respectfully)",
      "Congrats you found the cardio feature üèÉ‚Äç‚ôÄÔ∏èüí®"
    ];

    function escapeNo(){
      noEscapes++;
      randomPositionWithin(btnArea, noBtn);

      note.textContent = roastLines[Math.min(roastLines.length-1, noEscapes-1)];


      // Cap the YES growth on small screens so it doesn't fly off the card
      const smallScreen = window.matchMedia && window.matchMedia('(max-width: 420px)').matches;
      const maxScale = smallScreen ? 1.45 : 1.85;

      const scale = Math.min(1.0 + noEscapes * 0.09, maxScale);

      yesBtn.style.transform = `scale(${scale})`;
      yesBtn.style.boxShadow = `0 16px 30px rgba(255,59,122,${Math.min(.25 + noEscapes*.06, .6)})`;

      if (noEscapes === 3){
        subtitle.textContent = "Just so we‚Äôre aligned: ‚ÄúNo‚Äù is more of a suggestion than a choice here.";
      }
      if (noEscapes === 6){
        subtitle.textContent = "I‚Äôm calling it: you meant YES. The court agrees.";
        yesBtn.textContent = "YES (before it gets weirder) üíò";
      }
      if (noEscapes >= 8){
        noBtn.textContent = "I can't üò≠";
      }
    }

    // Less-slippery NO behavior on mobile:
    // - On desktop: runs away on hover/move (classic)
    // - On mobile: only runs away *after* a couple of taps, and only on tap (not on touchstart hover)
    const isMobile = window.matchMedia && window.matchMedia('(max-width: 420px)').matches;
    let mobileGraceTaps = 2;         // allow a couple of honest attempts
    let mobileCooldownUntil = 0;     // prevent rapid-fire teleporting

    if (!isMobile){
      noBtn.addEventListener('mouseenter', escapeNo);
      noBtn.addEventListener('mousemove', escapeNo);
    }

    noBtn.addEventListener('click', (e) => {
      if (!isMobile){
        escapeNo();
        return;
      }

      // Mobile behavior
      if (mobileGraceTaps > 0){
        mobileGraceTaps--;
        note.textContent = mobileGraceTaps === 1
          ? "Okay okay‚Ä¶ one more try üòå"
          : "Fair. I‚Äôll allow it once üòá";
        return;
      }

      const now = Date.now();
      if (now < mobileCooldownUntil){
        // too soon; don't move again
        return;
      }
      mobileCooldownUntil = now + 600; // 0.6s cooldown between moves

      escapeNo();
    });

    const canvas = document.getElementById('fx');
    const ctx = canvas.getContext('2d');

    function resize(){
      canvas.width = window.innerWidth * devicePixelRatio;
      canvas.height = window.innerHeight * devicePixelRatio;
      canvas.style.width = window.innerWidth + 'px';
      canvas.style.height = window.innerHeight + 'px';
      ctx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);
    }
    window.addEventListener('resize', resize);
    resize();

    const particles = [];
    function addBurst(){
      const count = 170;
      const cx = window.innerWidth/2;
      const cy = window.innerHeight/2;

      for (let i=0;i<count;i++){
        const angle = Math.random()*Math.PI*2;
        const speed = 3 + Math.random()*6;
        const isHeart = Math.random() < 0.4;

        particles.push({
          x: cx + (Math.random()*20-10),
          y: cy + (Math.random()*20-10),
          vx: Math.cos(angle)*speed,
          vy: Math.sin(angle)*speed - (2 + Math.random()*2),
          r: isHeart ? 7 + Math.random()*6 : 3 + Math.random()*4,
          rot: Math.random()*Math.PI,
          vr: (Math.random()-.5)*0.22,
          life: 0,
          ttl: 120 + Math.random()*40,
          heart: isHeart
        });
      }
    }

    function drawHeart(x,y,size,rot,alpha){
      ctx.save();
      ctx.translate(x,y);
      ctx.rotate(rot);
      ctx.globalAlpha = alpha;

      ctx.beginPath();
      const s = size;
      ctx.moveTo(0, s*0.35);
      ctx.bezierCurveTo(0, -s*0.1, -s, -s*0.1, -s, s*0.35);
      ctx.bezierCurveTo(-s, s*0.9, 0, s*1.15, 0, s*1.35);
      ctx.bezierCurveTo(0, s*1.15, s, s*0.9, s, s*0.35);
      ctx.bezierCurveTo(s, -s*0.1, 0, -s*0.1, 0, s*0.35);
      ctx.closePath();

      const grad = ctx.createLinearGradient(-s, -s, s, s);
      grad.addColorStop(0, "#ff3b7a");
      grad.addColorStop(1, "#ffb3c8");
      ctx.fillStyle = grad;
      ctx.fill();

      ctx.restore();
    }

    function tick(){
      ctx.clearRect(0,0,window.innerWidth,window.innerHeight);

      for (let i=particles.length-1;i>=0;i--){
        const p = particles[i];
        p.life++;
        p.x += p.vx;
        p.y += p.vy;
        p.vy += 0.12;
        p.vx *= 0.99;
        p.vy *= 0.99;
        p.rot += p.vr;

        const t = 1 - (p.life / p.ttl);
        const alpha = Math.max(0, Math.min(1, t));

        if (p.heart){
          drawHeart(p.x, p.y, p.r, p.rot, alpha);
        } else {
          ctx.save();
          ctx.globalAlpha = alpha;
          ctx.translate(p.x, p.y);
          ctx.rotate(p.rot);
          ctx.fillStyle = "rgba(255,59,122,0.9)";
          ctx.fillRect(-p.r, -p.r, p.r*2, p.r*2);
          ctx.restore();
        }

        if (p.life >= p.ttl) particles.splice(i,1);
      }

      requestAnimationFrame(tick);
    }
    tick();

    function celebrate(){
      addBurst();
      setTimeout(addBurst, 240);
      setTimeout(addBurst, 520);
    }

    yesBtn.addEventListener('click', () => {
      overlay.classList.add('show');
      subtitle.textContent = "Excellent decision. 10/10. No notes.";
      note.textContent = "This is the part where Ishaan acts cool (fails).";
      celebrate();
    });

    closeBtn.addEventListener('click', () => overlay.classList.remove('show'));
    overlay.addEventListener('click', (e) => { if (e.target === overlay) overlay.classList.remove('show'); });
  </script>
</body>
</html>
